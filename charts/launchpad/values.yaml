# Default values for launchpad

# Namespace configuration
namespace: launchpad

# Image configuration
image:
  repository: ghcr.io/rjsadow/launchpad
  tag: latest
  pullPolicy: Always

# VNC sidecar image for container sessions
vncSidecar:
  image: ghcr.io/rjsadow/launchpad-vnc-sidecar:latest

# Guacd sidecar image for Windows RDP sessions
guacdSidecar:
  image: guacamole/guacd:1.5.5

# Replica count - supports >1 for horizontal scalability.
# When replicaCount > 1, persistence.enabled must be true with a ReadWriteMany
# storage class so all replicas share the same SQLite database.
# The application is stateless: sessions are stored in the database and
# any replica can serve any request.
replicaCount: 1

# JWT Authentication configuration
auth:
  enabled: true
  # JWT signing secret (minimum 32 characters)
  # Generate with: openssl rand -base64 32
  jwtSecret: ""
  # Access token expiry in minutes
  accessExpiry: "15"
  # Refresh token expiry in hours
  refreshExpiry: "24"
  # Initial admin credentials
  adminUsername: "admin"
  adminPassword: "admin123"
  # Allow user self-registration (can be changed by admin in UI)
  allowRegistration: false
  # Use existing secret instead of creating one
  existingSecret: ""

# Session configuration
session:
  timeout: "120"           # Session timeout in minutes
  cleanupInterval: "5"     # Cleanup interval in minutes
  podReadyTimeout: "300"   # Pod ready timeout in seconds

# Resource limits for the launchpad server
resources:
  requests:
    cpu: "100m"
    memory: "128Mi"
  limits:
    cpu: "500m"
    memory: "512Mi"

# Service configuration
service:
  type: ClusterIP
  port: 80

# Ingress configuration
ingress:
  enabled: false
  host: launchpad.example.com
  annotations: {}

# Network policies
networkPolicy:
  enabled: true

# Resource quota
resourceQuota:
  enabled: true
  pods: "50"
  requestsCpu: "20"
  requestsMemory: "40Gi"
  limitsCpu: "40"
  limitsMemory: "80Gi"

# Limit range
limitRange:
  enabled: true

# Persistent storage for SQLite database.
# Required for multi-replica deployments.
# Use ReadWriteMany access mode with a shared filesystem (e.g., NFS, CephFS, EFS)
# when running more than one replica so all pods share the same database.
persistence:
  enabled: false
  # storageClass: ""  # Use default storage class if empty
  size: 1Gi
  accessModes:
    - ReadWriteOnce  # Change to ReadWriteMany for replicaCount > 1
